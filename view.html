


	<!DOCTYPE html>
	
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	
	<link rel="icon" href="https://dhsntech.github.io/yjvs-homework/yjvs-information-b-icon.svg" type="image/x-icon" >
	
    <link rel="stylesheet" href="https://dhsntech.github.io/yjvs-homework/style.css">
	
	<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VJKPWQR0EJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VJKPWQR0EJ');
</script>


	<html lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>è³‡è¨Šä¸€â€‹é›»å­ä½œæ¥­å…¬å‘Šç³»çµ±</title>

	</head>
	



	<body>

	<img class="logo" src="https://dhsntech.github.io/yjvs-homework/yjvs-information-homework-system.svg" alt="æ°¸é–é«˜å·¥ è³‡è¨Šç§‘  Yjvs Information" >
		<a href="https://discord.com/oauth2/authorize?client_id=1084389665026613288&amp;permissions=8&amp;integration_type=0&amp;scope=bot+applications.commands" target="_blank">ä½œè€…dcæ©Ÿå™¨äºº</a>
		<a href="https://youtu.be/dQw4w9WgXcQ?si=81BwvByC3bO-n_qL" target="_blank">é»æ“Šé ˜å–ç¦åˆ©</a>
		<div class="form">
			<h2>è¦å‰‡</h2>
			<div class="form2">
				<h3>1.è«‹å‹¿å¤–æµé€£çµçµ¦æœ¬ç­ä»¥å¤–çš„å­¸ç”Ÿ</h3>
				<h3>2.è«‹å‹¿å†’ç”¨ä»–äººèº«åˆ†å¦‚æ”¶åˆ°èˆ‰å ±å‰‡æœƒèª¿å‡ºå¾Œå°ipä¸¦æ°¸ä¹…å°é–æ­¤ip</h3>
				<h3>3.è«‹å‹¿å‚³é€ç„¡æ„ç¾©ä¹‹è¨Šæ¯åˆ·å±</h3>
			</div>
		</div>
		
		
		<div class="form">
			<h2>ä½œæ¥­åˆ—è¡¨</h2>
			<div class="form2">
				
				<div class="loadingSpinner" id="loadingSpinner" >
					<div id="loadingSpinnerloader" class="loadingSpinnerloader"></div>	
					<div id="loadingSpinnertext" class="loadingSpinnertext"></div>
				</div>
				
					<div id="homeworkList">
				
						<div class="homeworkItem"></div>
					
					</div>
					

				
			</div>
			
			
		</div>
		


		<div class="form">
			<h2>ä¸Šå‚³ä½œæ¥­è¡¨å–®</h2>
			<div class="form2">
				<label for="uploader">ä½œæ¥­ä¸Šå‚³è€…ï¼š</label>
				<input type="text" id="uploader" placeholder="è«‹è¼¸å…¥ä¸Šå‚³è€…å§“åæˆ–åº§è™Ÿ"><br>
			
				<label for="homeworkInput">ä½œæ¥­å…§å®¹ï¼š</label	>
				<textarea id="homeworkInput" placeholder="è«‹è¼¸å…¥ä»Šå¤©çš„ä½œæ¥­..." rows="3" cols="50"></textarea><br>
							
				<label for="uploadDate">ç³»çµ±ä¸Šå‚³æ—¥æœŸï¼š</label>
				<input type="date" id="uploadDate"><br>			
		
				<label for="dueDate">ä½œæ¥­ç¹³äº¤æ—¥æœŸï¼š</label>
				<input type="date" id="dueDate"><br>
				<button class="saveHomework" id="saveHomework">ä¸Šå‚³ä½œæ¥­</button>
			</div>	

		</div>



	<footer>
		<br>
		<h5> Â© 2024 by ğ“Ÿğ“¾ğ“­ğ“­ğ“²ğ“·ğ“° Code x DigiHorizon TECH x SevenBlue TECH </h5>
		<br>
		<br>
		<br>
		<a href="https://sally802528.wixsite.com/information" target="_blank">è·³è½‰è‡³èªªæ˜é </a>
	</footer>

		<script>
		async function saveHomework(homework) {
			console.log(homework); 
			try {
				const response = await fetch('save_homework.php', {
					method: "POST",
					headers: {
						"Content-Type": "application/json"
					},
					body: JSON.stringify(homework)
				});
				const result = await response.json();
				if (result.success) {
					loadHomeworks();
					
					
					Swal.fire({
						icon: 'success',
						title: 'ä¸Šå‚³æˆåŠŸ',
						text: '',
						confirmButtonText: 'ç¢ºèª'
					});
				} else {
					console.error("Error adding document:", result.error);
						Swal.fire({
						icon: 'error',
						title: 'ä¸Šå‚³å¤±æ•—',
						text: 'Error adding document:result.error',
						timer: 10000,
						timerProgressBar: true,
						confirmButtonText: 'ç¢ºèª'
					});
				}
			} catch (error) {
				console.error("Error adding document:", error);
						Swal.fire({
						icon: 'error',
						title: 'ä¸Šå‚³å¤±æ•—',
						text: 'Error adding document:error',
						timer: 10000,
						timerProgressBar: true,
						confirmButtonText: 'ç¢ºèª'
					});
			}
		}


async function loadHomeworks() {
    const homeworkList = document.getElementById('homeworkList');
    const loadingSpinnerloader = document.getElementById('loadingSpinner');
	
    // é¡¯ç¤ºè¼‰å…¥å‹•ç•«
    loadingSpinner.style.display = 'block';
    homeworkList.innerHTML = '';
	homeworkList.style.display = 'none';

    try {
        const response = await fetch('load_homeworks.php');
        let homeworks = await response.json();

        // éš±è—è¼‰å…¥å‹•ç•«
        loadingSpinner.style.display = 'none';

        // Get today's date in local time YYYY-MM-DD format
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');
        const localToday = `${year}-${month}-${day}`;

        // Filter homeworks to only include those that are due today or in the future
        homeworks = homeworks.filter(homework => new Date(homework.dueDate) >= new Date(localToday));
        
        // Sort by due date
        homeworks.sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));

        homeworks.forEach((homework) => {
            const homeworkDiv = document.createElement('div');
            homeworkDiv.classList.add('homeworkItem');

            // Create individual lines for each piece of information
            const uploader = document.createElement('p');
            uploader.textContent = `ä¸Šå‚³è€…ï¼š${homework.uploader}`;

            const homeworkText = document.createElement('p');
            homeworkText.textContent = `ä½œæ¥­å…§å®¹ï¼š${homework.homeworkText}`;

            const uploadDate = document.createElement('p');
            uploadDate.textContent = `ä¸Šå‚³æ—¥æœŸï¼š${homework.uploadDate}`;

            const dueDate = document.createElement('p');
            dueDate.textContent = `ç¹³äº¤æ—¥æœŸï¼š${homework.dueDate}`;

            // Append lines to homeworkDiv
            homeworkDiv.appendChild(uploader);
            homeworkDiv.appendChild(homeworkText);
            homeworkDiv.appendChild(uploadDate);
            homeworkDiv.appendChild(dueDate);

            homeworkList.appendChild(homeworkDiv);
			
			
			homeworkList.style.display = 'block';
        });
    } catch (error) {
        // éš±è—è¼‰å…¥å‹•ç•«ä¸¦é¡¯ç¤ºéŒ¯èª¤æ¶ˆæ¯
        // éš±è—è¼‰å…¥å‹•ç•«
        loadingSpinner.style.display = 'none';
        console.error("Error loading documents:", error);
        Swal.fire({
            icon: 'warning',
            title: 'ç„¡æ³•è¼‰å…¥ä½œæ¥­åˆ—è¡¨',
            text: 'Error loading documents: error',
            timer: 10000,
            timerProgressBar: true,
            confirmButtonText: 'ç¢ºèª'
        });
    }
}




document.addEventListener('DOMContentLoaded', (event) => {
    const today = new Date();
    const year = today.getFullYear();
    const month = String(today.getMonth() + 1).padStart(2, '0'); // Months are zero-based
    const day = String(today.getDate()).padStart(2, '0');
    const formattedDate = `${year}-${month}-${day}`;
    document.getElementById('uploadDate').value = formattedDate;
});


document.getElementById('saveHomework').addEventListener('click', function() {
    const uploader = document.getElementById('uploader').value.trim();
    const uploadDate = document.getElementById('uploadDate').value;
    const homeworkText = document.getElementById('homeworkInput').value.trim();
    const dueDate = document.getElementById('dueDate').value;

    if (uploader && homeworkText && uploadDate && dueDate) {
        const homework = { 
            uploader, 
            uploadDate, 
            homeworkText, 
            dueDate 
        };
        saveHomework(homework);

        document.getElementById('uploader').value = '';
        document.getElementById('uploadDate').value = formattedDate;
        document.getElementById('homeworkInput').value = '';
        document.getElementById('dueDate').value = '';
    } else {
        Swal.fire({
            icon: 'error',
            title: 'è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½',
            text: 'è«‹ç¢ºèªæ¯å€‹æ¬„ä½éƒ½å·²å¡«å¯«',
			timer: 10000,
			timerProgressBar: true,
			confirmButtonText: 'ç¢ºèª'
        });
    }
});
		
loadHomeworks();

	
		

		</script>


	</body>
	</html>
